CREATE PROCEDURE lhs_test1
AS
BEGIN
    DECLARE @workyear DATE = '2024-01-01';
    DECLARE @workdate DATE = @workyear;
    DECLARE @yearinput INT = 10;
    DECLARE @week_num INT;
    DECLARE @total_weeks INT = 52;
    DECLARE @year_num INT = 1;
    DECLARE @total_num INT = 7;

    -- 2024년부터 2030년까지 반복
    WHILE YEAR(@workyear) <= 2030
    BEGIN
        -- 초기 @workdate를 현재 연도의 첫날로 설정
        SET @workdate = @workyear;

        -- 외부 WHILE 루프
        WHILE @year_num <= @total_num
        BEGIN
            -- 주차 계산
            SET @week_num = DATEPART(week, @workdate) + 1;

            -- 내부 WHILE 루프
            WHILE @week_num <= @total_weeks
            BEGIN
                -- 데이터 삽입
                INSERT INTO lhs_test(yearseq, workdate, MP_PERIOD)
            VALUES (CAST(YEAR(@workyear) AS VARCHAR) + LEFT('000000' + CAST(@yearinput AS VARCHAR), 6), @workdate,CAST(YEAR(@workyear) AS VARCHAR) + LEFT('0' + CAST(@week_num AS VARCHAR), 2));

                -- 다음 주로 이동
                SET @workdate = DATEADD(DAY, 7, @workdate);
                SET @week_num = DATEPART(week, @workdate) + 1;
            END 

            -- 다음 연도로 이동
            SET @year_num = @year_num + 1;
            SET @yearinput = @yearinput + 10;
        END 
        
        -- 다음 해로 이동
        SET @workyear = DATEADD(YEAR, 1, @workyear);
        -- 초기화
        SET @year_num = 1;
        SET @yearinput = 10;
    END 
END;

